version: 2.1
jobs:
  build-and-push:
    docker:
      - image: circleci/openjdk:8u242-jdk
    steps:
      - checkout
      - setup_remote_docker
      - run: docker version
      #- run: mvn dependency:go-offline
      #- run:
          #name: Package
          #command: mvn clean package -Dmaven.test.skip=true -Ddockerfile.skip
      #- run:
          #name: Build
          #command: docker build -t "yanghuijava/spring-petclinic-mono:${CIRCLE_BRANCH}-${CIRCLE_BUILD_NUM}" --build-arg JAR_FILE=spring-petclinic-1.0.0.RELEASE.jar .
      #- run:
          #name: Login to Dockerhub
          #command: docker login -u $DOCKER_USER -p $DOCKER_PASS
      #- run:
          #name: Push
          #command: docker push yanghuijava/spring-petclinic-mono:${CIRCLE_BRANCH}-${CIRCLE_BUILD_NUM}
workflows:
  build-flow:
    jobs:
      - build-and-push
